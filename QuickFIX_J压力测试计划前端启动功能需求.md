# QuickFIX/J压力测试计划前端启动功能需求补充

## 八、前端页面启动压力测试计划专项需求

### 8.1 测试计划管理模块（前端核心入口）

#### 8.1.1 计划创建与基础配置



*   **计划基础信息设置**：


    *   提供表单输入区，支持填写计划名称（如 “202409\_FIX44\_500TPS 稳定性测试”）、业务场景描述（如 “模拟期货订单峰值交易”）、关联 FIX 协议版本（下拉选择：FIX4.2/FIX4.4/FIX5.0SP2）、测试负责人（下拉选择或输入，关联系统用户）；

    *   支持设置计划标签（如 “峰值测试”“长时间稳定性”），标签可自定义新增，用于后续筛选归类。

*   **模板快速复用**：


    *   页面左侧提供 “场景模板库”，展示已保存的模板（如 “100 会话 500TPS 模板”“24 小时稳定性模板”），支持点击模板自动填充基础配置与核心参数；

    *   模板支持预览（点击模板显示关键参数：会话数、TPS 范围、消息比例），并支持 “基于模板新建”“复制模板修改” 操作。

*   **计划状态可视化**：


    *   计划列表展示 “状态标签”（草稿 / 已配置 / 待启动 / 执行中 / 已完成 / 执行失败），不同状态用不同颜色标注（如执行中 - 绿色、失败 - 红色）；

    *   支持按状态、协议版本、创建时间筛选计划，列表提供 “查看详情”“编辑”“删除”“复制” 操作按钮（仅对草稿 / 已完成状态的计划开放编辑）。

#### 8.1.2 计划参数分步配置（向导式操作）



*   **配置流程引导**：


    *   采用分步向导模式，将参数配置拆分为 3 个步骤，每步完成后点击 “下一步” 进入下环节，支持 “上一步” 返回修改，步骤进度条显示当前位置（如 “1/3 会话配置 → 2/3 流量配置 → 3/3 执行设置”）；

    *   每步页面顶部提供 “当前步骤说明”（如 “会话配置：设置并发 FIX 会话数量与连接策略”），关键参数旁提供 “问号提示”（hover 显示参数含义，如 “批量登录间隔：控制会话批量上线的时间差，避免瞬间登录压力”）。

### 8.2 核心参数可视化配置界面

#### 8.2.1 并发会话配置（步骤 1）



*   **会话数量与标识配置**：


    *   提供滑块 + 输入框双控组件（滑块范围 10\~1000，输入框支持直接输入数字）设置 “总并发会话数”，实时显示当前值；

    *   支持 “会话 ID 批量生成规则” 配置：可选择 “按序号递增”（如 SenderCompID=CLIENT\_001\~CLIENT\_100，TargetCompID 固定为 SERVER）或 “导入 CSV”（点击上传包含 SenderCompID/TargetCompID 的 CSV 文件，前端预览数据并校验格式）。

*   **会话连接策略配置**：


    *   批量登录策略：下拉选择 “立即全部登录”“梯度登录”（配置 “登录间隔”，如 100 个会话每 2 秒登录 10 个）、“随机登录”（配置 “登录时长范围”，如 10\~30 秒内随机登录所有会话）；

    *   重连设置：勾选 “启用自动重连” 后，配置 “重连间隔”（如 5 秒）、“最大重连次数”（如 10 次），前端实时提示 “启用后会话断开将自动重试，超过最大次数则标记会话失败”。

#### 8.2.2 消息流量配置（步骤 2）



*   **TPS 阶梯配置**：


    *   提供 “阶梯表格”，支持新增 / 删除阶梯行，每行配置 “目标 TPS”（输入框，范围 1\~5000）、“持续时长”（时间选择器，单位分钟，范围 1\~60）、“备注”（如 “初始压力”“峰值压力”）；

    *   表格下方实时显示 “总测试时长”（自动计算所有阶梯时长之和），并提供 “预览 TPS 曲线” 按钮，点击弹出折线图展示 TPS 随时间变化趋势。

*   **消息类型与内容配置**：


    *   消息类型比例：采用 “环形图 + 百分比输入框” 组合，支持配置 NewOrderSingle/CancelOrder/ReplaceOrder/ExecutionReport 等类型的占比（总和强制为 100%，输入一个值后其他值自动调整）；

    *   大消息设置：勾选 “启用大消息测试” 后，配置 “消息尺寸范围”（滑块，1\~10KB）、“大消息占比”（输入框，0\~50%），前端提示 “大消息可能导致 TPS 衰减，建议结合系统能力配置”；

    *   自定义字段配置：点击 “添加自定义字段”，弹出表单输入 “字段标签”“字段 ID”“值生成规则”（下拉选择：随机数 / 枚举值 / 递增序列，枚举值支持手动输入多个选项）。

#### 8.2.3 测试触发与停止配置（步骤 3）



*   **启动方式选择**：


    *   支持 “立即启动”（点击后直接提交执行）、“定时启动”（时间选择器，设置未来 1 小时～7 天内的启动时间，前端显示 “预计启动时间” 及倒计时）；

    *   启动前检查项：前端自动校验 “必填参数是否完整”“TPS 阶梯是否合理”“会话 ID 是否重复”，校验不通过时显示红色提示（如 “会话 ID 重复，请修改生成规则”），并阻止进入下一步。

*   **自动停止条件配置**：


    *   支持设置 “最大持续时长”（如 72 小时，超时自动停止）、“异常阈值停止”（配置消息丢失率≥1%、延迟 P99≥500ms、会话断开率≥5% 时自动停止）；

    *   提供 “紧急停止触发” 选项，勾选后前端生成 “紧急停止令牌”（一串唯一字符），用于后续执行中手动停止时验证权限（避免误操作）。

### 8.3 测试启动与执行控制界面

#### 8.3.1 启动前确认与环境检查



*   **启动确认弹窗**：


    *   点击 “启动测试” 后弹出弹窗，展示 “计划名称、核心参数摘要（会话数、目标 TPS、测试时长）、执行风险提示（如 “高 TPS 可能占用大量系统资源，建议非业务时段执行”）”；

    *   弹窗底部提供 “环境检查” 按钮，点击后前端调用后端接口检查：FIX 引擎服务是否在线、目标服务器资源是否充足（CPU≤70%、内存≤60%）、网络连通性是否正常，检查结果实时显示（绿色通过 / 红色失败），失败项提供 “排查建议”（如 “FIX 引擎离线，请联系运维启动”）。

*   **启动日志记录**：


    *   确认启动后，前端显示 “启动中...” 状态，实时加载后端返回的启动日志（如 “正在初始化 100 个会话...”“已加载消息模板...”“开始执行第 1 个 TPS 阶梯（50TPS，持续 10 分钟）”），日志支持复制与下载。

#### 8.3.2 执行中实时控制



*   **状态与进度展示**：


    *   页面顶部显示 “当前状态”（执行中 / 暂停中）、“已运行时间”“剩余时间”“当前 TPS 阶梯”，并提供 “进度条” 直观展示测试完成比例；

    *   支持 “暂停 / 恢复” 操作：点击暂停后，前端发送请求通知后端暂停消息发送，状态更新为 “暂停中”，恢复后继续从当前阶梯剩余时间执行，暂停期间记录 “暂停时长” 并计入总运行时间。

*   **紧急停止操作**：


    *   提供红色 “紧急停止” 按钮，点击后要求输入 “紧急停止令牌”（启动时生成的字符），验证通过后发送停止请求；

    *   停止后前端显示 “停止中...”，并实时更新停止日志（如 “正在停止消息发送...”“正在清理会话连接...”“测试已停止，正在生成初步结果”），停止完成后状态更新为 “已完成”。

### 8.4 前端实时监控面板

#### 8.4.1 监控数据可视化展示



*   **多维度图表组件**：


    *   **系统资源监控区**：并列展示 CPU 使用率（按核心拆分的堆叠折线图）、内存使用率（堆 / 非堆内存的面积图）、网络 IO（发送 / 接收字节数的双轴折线图），图表支持 “缩放时间范围”（如查看近 5 分钟 / 近 1 小时数据）、“切换刷新频率”（1 秒 / 5 秒 / 10 秒）；

    *   **业务指标监控区**：左侧展示 TPS 实时趋势（折线图，标注当前值与峰值）、延迟分布（箱线图，显示 P50/P90/P95/P99），右侧展示消息成功率（饼图，成功 / 失败占比）、会话状态（数字卡片，在线数 / 断开数 / 重连数，断开数标红）；

    *   **异常指标告警**：当指标触发阈值（如延迟 P99≥500ms）时，对应图表边框闪烁红色，同时前端弹出 “悬浮通知”（显示异常指标名称、当前值、阈值），通知支持 “查看详情”（跳转至异常时间段的详细数据）。

#### 8.4.2 实时数据钻取与筛选



*   **数据下钻功能**：


    *   点击 TPS 折线图的某一时间点，弹出 “该时间点详情” 弹窗，展示 “发送消息数、接收消息数、丢失数、重传数”，并支持按 “消息类型” 筛选（如仅查看 NewOrderSingle 的数量）；

    *   点击会话状态卡片，跳转至 “会话详情页”，展示所有会话的 ID、连接状态、发送 / 接收消息数、断开次数，支持按 “状态” 筛选（在线 / 断开），并可查看单个会话的消息日志。

*   **实时日志筛选**：


    *   提供 “实时日志流” 区域，按时间倒序展示消息级日志（如 “\[10:05:30] 会话 CLIENT\_001 发送 NewOrderSingle（ClOrdID=12345），延迟 80ms”）；

    *   日志支持按 “会话 ID、消息类型、处理结果（成功 / 失败）” 筛选，输入关键词后实时过滤，筛选条件支持保存为 “常用筛选器”（如 “仅看失败消息”）。

### 8.5 测试结果查看与导出界面

#### 8.5.1 结果汇总报告展示



*   **核心指标概览**：


    *   页面顶部以 “指标卡片” 形式展示核心结果：平均 TPS、峰值 TPS、延迟 P99、消息成功率、会话重连成功率、异常次数，每个指标标注 “评级”（优秀 / 良好 / 合格 / 不合格）及 “对比基准”（如与历史最优值对比，显示 “提升 5%” 或 “下降 3%”）；

    *   提供 “结果摘要” 文本区，自动生成测试结论（如 “本次测试在 500TPS 压力下持续 24 小时，消息成功率 99.99%，延迟 P99 180ms，无会话异常断开，满足性能要求”），支持编辑修改（用于补充人工分析）。

#### 8.5.2 详细数据与导出功能



*   **详细数据表格**：


    *   提供 “时间粒度数据” 表格（按分钟 / 小时统计 TPS、延迟、成功率）、“消息类型数据” 表格（按类型统计发送数、接收数、失败数）、“会话数据” 表格（按会话 ID 统计在线时长、消息数、断开次数）；

    *   表格支持 “排序”（点击列头升序 / 降序）、“筛选”（输入关键词或选择下拉选项）、“分页”（默认 10 条 / 页，支持自定义每页条数），数据支持复制到剪贴板。

*   **报告与图表导出**：


    *   支持 “报告导出”：提供 PDF/Excel 两种格式，PDF 包含指标概览、详细表格、所有趋势图表（嵌入图片），Excel 包含所有详细数据（分 sheet 存储），导出时可选择 “是否包含原始日志”（日志量大时提示 “建议单独下载日志”）；

    *   支持 “图表导出”：每个监控图表提供 “下载” 按钮，支持导出为 PNG（高清）、SVG（矢量图）格式，导出文件名自动包含 “计划名称 + 图表类型 + 时间戳”（如 “FIX44\_500TPS 测试\_CPU 监控\_202409091030.png”）。

#### 8.5.3 历史结果对比



*   **历史记录查询**：


    *   提供 “历史测试结果” 列表，按 “执行时间” 倒序排列，展示计划名称、执行时间、核心指标（平均 TPS、成功率）、结果评级，支持按 “协议版本、测试类型、结果评级” 筛选；

    *   点击列表项进入 “历史结果详情页”，展示与当前结果相同格式的报告，支持 “对比” 操作（勾选多个历史结果，点击 “对比分析”）。

*   **多结果对比视图**：


    *   对比视图以 “雷达图” 展示多个结果的核心指标对比（如平均 TPS、延迟 P99、成功率），以 “折线图” 展示相同 TPS 阶梯下的性能差异，表格展示各结果的指标数值对比；

    *   支持 “导出对比报告”（PDF 格式，包含对比图表与数据表格），用于性能优化效果验证（如 “优化 JVM 参数后，延迟 P99 从 250ms 降至 180ms，提升 28%”）。

> （注：文档部分内容可能由 AI 生成）